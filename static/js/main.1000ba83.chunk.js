(this["webpackJsonpnufinetes-link-demo"]=this["webpackJsonpnufinetes-link-demo"]||[]).push([[0],{166:function(e){e.exports=JSON.parse('[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"balance","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"}]')},269:function(e,t,n){},279:function(e,t){},299:function(e,t){},353:function(e,t){},354:function(e,t){},369:function(e,t){},383:function(e,t){},385:function(e,t){},405:function(e,t){},407:function(e,t){},419:function(e,t){},422:function(e,t){},426:function(e,t){},433:function(e,t,n){},434:function(e,t,n){"use strict";n.r(t);var c,r=n(7),i=n.n(r),s=n(246),a=n.n(s),o=(n(269),n(57)),l=n(16),d=n(34),u=n(35),b=n(1);function j(){var e=window.location.pathname;return Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"center",width:"600px",padding:"1rem",margin:"1rem",overflow:"auto",border:"1px solid",borderRadius:"1rem",flexWrap:"wrap"},children:[Object(b.jsx)(p,{className:"/"===e?"active":"",children:Object(b.jsx)(o.b,{to:"/",children:"Multi wallet example"})}),Object(b.jsx)(p,{className:"/dapp"===e?"active":"",children:Object(b.jsx)(o.b,{to:"/dapp",children:"Dapp wallet example"})}),Object(b.jsx)(p,{className:"/eth-sign"===e?"active":"",children:Object(b.jsx)(o.b,{to:"/eth-sign",children:"Ethereum Sign example"})}),Object(b.jsx)(p,{className:"/contract"===e?"active":"",children:Object(b.jsx)(o.b,{to:"/contract",children:"Eth Contract call example"})}),Object(b.jsx)(p,{className:"/vechain"===e?"active":"",children:Object(b.jsx)(o.b,{to:"/vechain",children:"Vechain Contract call example"})})]})}var p=u.a.div(c||(c=Object(d.a)(["\n  margin-right: 20px;\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  a {\n    text-decoration: underline;\n    color: #000;\n  }\n  &.active {\n    a {\n      color: #1665e3;\n      text-decoration: none;\n    }\n  }\n"]))),h=n(15),v=n(42),f=n(132),x=Object(v.initializeConnector)((function(e){return new f.MetaMask(e)})),m=Object(h.a)(x,2),O=m[0],g=m[1],y=n(160);function w(e){var t=e.accounts,n=e.provider,c=e.ENSNames,i=function(e,t){var n=Object(r.useState)(),c=Object(h.a)(n,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){if(e&&null!==t&&void 0!==t&&t.length){var n=!1;return Promise.all(t.map((function(t){return e.getBalance(t)}))).then((function(e){n||s(e)})),function(){n=!0,s(void 0)}}}),[e,t]),i}(n,t);return void 0===t?null:Object(b.jsxs)("div",{children:["Accounts:"," ",Object(b.jsx)("b",{children:0===t.length?"None":null===t||void 0===t?void 0:t.map((function(e,t){var n;return Object(b.jsxs)("ul",{style:{margin:0,overflow:"hidden",textOverflow:"ellipsis"},children:[null!==(n=null===c||void 0===c?void 0:c[t])&&void 0!==n?n:e,null!==i&&void 0!==i&&i[t]?" (\u039e".concat(Object(y.formatEther)(i[t]),")"):null]},e)}))})]})}function C(e){var t=e.children;return Object(b.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-between",width:"20rem",padding:"1rem",margin:"1rem",overflow:"auto",border:"1px solid",borderRadius:"1rem"},children:t})}var k={name:"Ether",symbol:"ETH",decimals:18},A={name:"Matic",symbol:"MATIC",decimals:18};function N(e){var t=E[e];return function(e){return!!e.nativeCurrency}(t)?{chainId:e,chainName:t.name,nativeCurrency:t.nativeCurrency,rpcUrls:t.urls,blockExplorerUrls:t.blockExplorerUrls}:e}var B="84842078b09946638c03157f83405213",S="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC",E={1:{urls:[B?"https://mainnet.infura.io/v3/".concat(B):void 0,S?"https://eth-mainnet.alchemyapi.io/v2/".concat(S):void 0,"https://cloudflare-eth.com"].filter((function(e){return void 0!==e})),name:"Mainnet"},3:{urls:[B?"https://ropsten.infura.io/v3/".concat(B):void 0].filter((function(e){return void 0!==e})),name:"Ropsten"},4:{urls:[B?"https://rinkeby.infura.io/v3/".concat(B):void 0].filter((function(e){return void 0!==e})),name:"Rinkeby"},5:{urls:[B?"https://goerli.infura.io/v3/".concat(B):void 0].filter((function(e){return void 0!==e})),name:"G\xf6rli"},42:{urls:[B?"https://kovan.infura.io/v3/".concat(B):void 0].filter((function(e){return void 0!==e})),name:"Kovan"},10:{urls:[B?"https://optimism-mainnet.infura.io/v3/".concat(B):void 0,"https://mainnet.optimism.io"].filter((function(e){return void 0!==e})),name:"Optimism",nativeCurrency:k,blockExplorerUrls:["https://optimistic.etherscan.io"]},69:{urls:[B?"https://optimism-kovan.infura.io/v3/".concat(B):void 0,"https://kovan.optimism.io"].filter((function(e){return void 0!==e})),name:"Optimism Kovan",nativeCurrency:k,blockExplorerUrls:["https://kovan-optimistic.etherscan.io"]},42161:{urls:[B?"https://arbitrum-mainnet.infura.io/v3/".concat(B):void 0,"https://arb1.arbitrum.io/rpc"].filter((function(e){return void 0!==e})),name:"Arbitrum One",nativeCurrency:k,blockExplorerUrls:["https://arbiscan.io"]},421611:{urls:[B?"https://arbitrum-rinkeby.infura.io/v3/".concat(B):void 0,"https://rinkeby.arbitrum.io/rpc"].filter((function(e){return void 0!==e})),name:"Arbitrum Testnet",nativeCurrency:k,blockExplorerUrls:["https://testnet.arbiscan.io"]},137:{urls:[B?"https://polygon-mainnet.infura.io/v3/".concat(B):void 0,"https://polygon-rpc.com"].filter((function(e){return void 0!==e})),name:"Polygon Mainnet",nativeCurrency:A,blockExplorerUrls:["https://polygonscan.com"]},80001:{urls:[B?"https://polygon-mumbai.infura.io/v3/".concat(B):void 0].filter((function(e){return void 0!==e})),name:"Polygon Mumbai",nativeCurrency:A,blockExplorerUrls:["https://mumbai.polygonscan.com"]}},I=Object.keys(E).reduce((function(e,t){var n=E[Number(t)].urls;return n.length&&(e[Number(t)]=n),e}),{});function D(e){var t,n=e.chainId;if(void 0===n)return null;var c=n?null===(t=E[n])||void 0===t?void 0:t.name:void 0;return c?Object(b.jsxs)("div",{children:["Chain:"," ",Object(b.jsxs)("b",{children:[c," (",n,")"]})]}):Object(b.jsxs)("div",{children:["Chain Id: ",Object(b.jsx)("b",{children:n})]})}var T=n(0),P=n(11),M=n(108),R=n(67);function F(e){var t=e.chainId,n=e.switchChain,c=e.displayDefault,r=e.chainIds;return Object(b.jsxs)("select",{value:t,onChange:function(e){null===n||void 0===n||n(Number(e.target.value))},disabled:void 0===n,children:[c?Object(b.jsx)("option",{value:-1,children:"Default Chain"}):null,r.map((function(e){var t,n;return Object(b.jsx)("option",{value:e,children:null!==(t=null===(n=E[e])||void 0===n?void 0:n.name)&&void 0!==t?t:e},e)}))]})}function _(e){var t=e.connector,n=e.chainId,c=e.targetChainId,i=e.isActivating,s=e.error,a=e.selectable,o=void 0===a||a,l=e.isActive,d=t instanceof M.Network,u=!d,j=(d?Object.keys(I):Object.keys(E)).map((function(e){return Number(e)})),p=Object(r.useState)(d?1:c||-1),v=Object(h.a)(p,2),f=v[0],x=v[1],m=Object(r.useCallback)(function(){var e=Object(P.a)(Object(T.a)().mark((function e(c){return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(c),c!==n){e.next=3;break}return e.abrupt("return");case 3:if(-1!==c||void 0===n){e.next=5;break}return e.abrupt("return");case 5:if(!(t instanceof R.WalletConnect||t instanceof M.Network)){e.next=10;break}return e.next=8,t.activate(-1===c?void 0:c);case 8:e.next=12;break;case 10:return e.next=12,t.activate(-1===c?void 0:N(c));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,n]);return s?Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[o&&Object(b.jsx)(F,{chainId:-1===f?-1:n,switchChain:m,displayDefault:u,chainIds:j}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)("button",{onClick:function(){return t instanceof R.WalletConnect||t instanceof M.Network?void t.activate(-1===f?void 0:f):void t.activate(-1===f?void 0:N(f))},children:"Try Again?"})]}):l?Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[o&&Object(b.jsx)(F,{chainId:-1===f?-1:n,switchChain:m,displayDefault:u,chainIds:j}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)("button",{onClick:function(){t.deactivate()},children:"Disconnect"})]}):Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[o&&Object(b.jsx)(F,{chainId:f,switchChain:i?void 0:m,displayDefault:u,chainIds:j}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)("button",{onClick:i?void 0:function(){return t instanceof R.WalletConnect||t instanceof M.Network?t.activate(-1===f?void 0:f):t.activate(-1===f?void 0:N(f))},disabled:i,children:"Connect"})]})}function L(e){var t,n=e.isActivating,c=e.error,r=e.isActive;return Object(b.jsx)("div",{children:c?Object(b.jsxs)(b.Fragment,{children:["\ud83d\udd34 ",null!==(t=c.name)&&void 0!==t?t:"Error",c.message?": ".concat(c.message):null]}):n?Object(b.jsx)(b.Fragment,{children:"\ud83d\udfe1 Connecting"}):r?Object(b.jsx)(b.Fragment,{children:"\ud83d\udfe2 Connected"}):Object(b.jsx)(b.Fragment,{children:"\u26aa\ufe0f Disconnected"})})}var W=g.useChainId,z=g.useAccounts,q=g.useError,V=g.useIsActivating,J=g.useIsActive,U=g.useProvider,G=g.useENSNames;function H(){var e=W(),t=z(),n=q(),c=V(),i=J(),s=U(),a=G(s);Object(r.useEffect)((function(){O.connectEagerly()}),[]);return Object(b.jsxs)(C,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"MetaMask"}),Object(b.jsx)(L,{isActivating:c,error:n,isActive:i}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(D,{chainId:e}),Object(b.jsx)(w,{accounts:t,provider:s,ENSNames:a})]}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(_,{connector:O,chainId:e,isActivating:c,error:n,isActive:i}),Object(b.jsx)("button",{onClick:function(){return console.log(s)},children:"Check provider"}),Object(b.jsx)("button",{onClick:function(){var e=["Example `personal_sign` message",t[0]];console.log(s.provider.request,s.provider.request({method:"personal_sign",params:e}).then((function(e){return console.log(e)})))},children:"SIGN"})]})}var K=Object(v.initializeConnector)((function(e){return new R.WalletConnect(e,{rpc:I})}),Object.keys(I).map((function(e){return Number(e)}))),Q=Object(h.a)(K,2),X=Q[0],Y=Q[1],Z=Y.useChainId,$=Y.useAccounts,ee=Y.useError,te=Y.useIsActivating,ne=Y.useIsActive,ce=Y.useProvider,re=Y.useENSNames;function ie(){var e=Z(),t=$(),n=ee(),c=te(),i=ne(),s=ce(),a=re(s);console.log(s,"check provder wc");return Object(r.useEffect)((function(){X.connectEagerly()}),[]),Object(b.jsxs)(C,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"WalletConnect"}),Object(b.jsx)(L,{isActivating:c,error:n,isActive:i}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(D,{chainId:e}),Object(b.jsx)(w,{accounts:t,provider:s,ENSNames:a})]}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(_,{connector:X,chainId:e,isActivating:c,error:n,isActive:i}),Object(b.jsx)("button",{onClick:function(){return console.log(s)},children:"Check provider"}),Object(b.jsx)("button",{onClick:function(){var e={id:1,jsonrpc:"2.0",method:"vechain_certificate",params:[{cert:JSON.stringify({purpose:"identification",payload:{type:"text",content:"112232344"},domain:window.location.origin})}]};s.sendCustomRequest?s.sendCustomRequest(e):console.log(s.provider.request,s.provider.request({method:"personal_sign",params:["check sign",t[0],"example"]}).then((function(e){return console.log(e)})))},children:"Check provider"})]})}var se=n(134),ae=Object(v.initializeConnector)((function(e){return new se.NufinetesConnector(e,{rpc:Object.keys(I).reduce((function(e,t){return e[t]=I[Number(t)][0],e}),{})})}),[1,2,3,4,42,818e6,818000001]),oe=Object(h.a)(ae,2),le=oe[0],de=oe[1],ue=de.useChainId,be=de.useAccounts,je=de.useError,pe=de.useIsActivating,he=de.useIsActive,ve=de.useProvider;function fe(){var e=ue(),t=be(),n=je(),c=pe(),i=he(),s=ve();console.log(s,"check provider"),Object(r.useEffect)((function(){le.connectEagerly()}),[]);return Object(b.jsxs)(C,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Nufinetes"}),Object(b.jsx)(L,{isActivating:c,error:n,isActive:i}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(D,{chainId:e}),Object(b.jsx)(w,{accounts:t})]}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(_,{connector:le,chainId:e,isActivating:c,error:n,selectable:!1,isActive:i}),Object(b.jsx)("button",{onClick:function(){return console.log(s,le.customProvider)},children:"Check provider"}),Object(b.jsx)("button",{onClick:function(){if(s.sendCustomRequest){console.log(s,"check provider");s.sendCustomRequest({id:1,jsonrpc:"2.0",method:"personal_sign",params:["Example `personal_sign` message","0x639c55cb0053974b273446043353a9918eccb00c"]}).then((function(e){return console.log(e)}))}else{console.log(s.provider.request,s.provider.request({method:"personal_sign",params:["Example `personal_sign` message","0x639c55cb0053974b273446043353a9918eccb00c"]}).then((function(e){return console.log(e)})))}},children:"SIGN"})]})}function xe(e){return e instanceof se.NufinetesConnector?"Nufinetes":e instanceof f.MetaMask?"MetaMask":e instanceof R.WalletConnect?"WalletConnect":"Unknown"}var me=Object(r.memo)((function(){var e=Object(v.useWeb3React)(),t=e.connector,n=e.chainId,c=e.accounts,r=e.isActivating,i=(e.error,e.account),s=e.isActive;e.provider;return Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},className:"wrapper",children:[Object(b.jsx)("h1",{children:"Native Web3ReactProvider Status"}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},className:"inner",children:[Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:16},children:[Object(b.jsx)("div",{className:"left",children:"Current Priority Wallet Type:"}),Object(b.jsx)("div",{style:{fontWeight:"bold",fontSize:20},className:"right",children:xe(t)})]}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:16},children:[Object(b.jsx)("div",{className:"left",children:"Current Chain Id:"}),Object(b.jsx)("div",{style:{fontWeight:"bold",fontSize:20},className:"right",children:n})]}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:16},children:[Object(b.jsx)("div",{className:"left",children:"Wallet Connected Correct:"}),Object(b.jsx)("div",{style:{fontWeight:"bold",fontSize:20},className:"right",children:s?"true":"false"})]}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:16},children:[Object(b.jsx)("div",{className:"left",children:"is Activating:"}),Object(b.jsx)("div",{style:{fontWeight:"bold",fontSize:20},className:"right",children:r?"true":"false"})]}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:16},children:[Object(b.jsx)("div",{className:"left",children:"Priority Account:"}),Object(b.jsx)("div",{style:{fontWeight:"bold",fontSize:20},className:"right",children:i})]}),Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:16},children:[Object(b.jsx)("div",{className:"left",children:"Accounts Provided:"}),Object(b.jsx)("div",{style:{fontWeight:"bold",fontSize:20,textAlign:"center"},className:"right",children:null===c||void 0===c?void 0:c.join(", ")})]})]})]})})),Oe=[[le,de],[O,g],[X,Y]];function ge(){return Object(b.jsx)(v.Web3ReactProvider,{connectors:Oe,lookupENS:!1,children:Object(b.jsx)(me,{})})}function ye(){return Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)(j,{}),Object(b.jsxs)("div",{style:{fontSize:18,width:800,textAlign:"center"},children:["Multi Wallet Connection",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"This example provides two panels to display the linking status of Nufinetes and MetaMask respectively. MetaMask wallet can also actively switch the chain that needs to be connected",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Nufinetes has the highest priority, which means that if two wallets are connected at the same time, The connector provided by useWeb3React context will be Nufinetes, only Nufinetes is disconnected, the preferred connector will become MetaMask"]}),Object(b.jsxs)("div",{style:{display:"flex",flexFlow:"wrap",fontFamily:"sans-serif"},children:[Object(b.jsx)(fe,{}),Object(b.jsx)(H,{}),Object(b.jsx)(ie,{})]}),Object(b.jsxs)("div",{style:{fontSize:18,width:800,textAlign:"center"},children:["An example of a native Web3ReactProvider is demonstrated here",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"Native Web3ReactProvider provides connector, chainId, accounts, isActivating, error, account, isActive, provider and other wallet states or variables, it is enough for regular dapp's business needs, if there is additional state that needs to be maintained, then you can encapsulate a layer of provider in your business to provide status, status can also be maintained by other state management tools",Object(b.jsx)("br",{}),Object(b.jsx)("br",{}),"In the Dapp wallet example, the demonstration will encapsulate a layer of Provider according to business needs: To simulating Vimworld Dapp requires multi-account login and needs to obtain tokens separately",Object(b.jsx)(o.b,{to:"/dapp",children:"Go and preview"})]}),Object(b.jsx)(ge,{})]})}var we=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){e("code1122334455")}),2e3)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(P.a)(Object(T.a)().mark((function e(t){return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){setTimeout((function(){e("token-".concat((new Date).getTime()))}),3e3)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ke(e){var t=(e||"").split("?");if(t.length<2)return{};var n=t[1];if(0===(n=n.split("#")[0]).length)return{};var c=n.split("&"),r={};return c.forEach((function(e){if(e&&0!==e.length){var t=e.split("=");if(!(t.length<2)){var n=t[0],c=t.slice(1,t.length).join("=");0!==c.length&&(r[decodeURIComponent(n)]=decodeURIComponent(c))}}})),r}var Ae,Ne,Be,Se,Ee,Ie="jwtToken",De=function(e,t){var n=localStorage.getItem(Ie),c={};try{c=JSON.parse(n)||{}}catch(r){c={}}c[e]=t,localStorage.setItem(Ie,JSON.stringify(c))},Te=function(e,t,n){var c=localStorage.getItem(e),r={};try{r=JSON.parse(c)||{}}catch(i){console.log(i)}r[t]=n,localStorage.setItem(e,JSON.stringify(r))},Pe=function(e,t){var n=localStorage.getItem(e),c={};try{c=JSON.parse(n)||{}}catch(r){console.log(r)}return t?c[t]:c},Me=Object(r.createContext)(void 0),Re=function(e){var t=e.children,n=Object(v.useWeb3React)(),c=n.connector,i=n.chainId,s=(n.accounts,n.isActivating,n.error,n.account),a=n.isActive,o=n.provider,l=Object(r.useState)(!1),d=Object(h.a)(l,2),u=d[0],j=d[1],p=Object(r.useState)(!1),f=Object(h.a)(p,2),x=f[0],m=f[1],O=Object(r.useState)(!1),g=Object(h.a)(O,2),y=g[0],w=g[1],C=Object(r.useState)(""),k=Object(h.a)(C,2),A=k[0],N=k[1],B=Object(r.useState)(""),S=Object(h.a)(B,2),E=S[0],I=S[1],D=Object(r.useState)(Object.create(null)),M=Object(h.a)(D,2),R=M[0],F=M[1],_=function(){var e=Object(P.a)(Object(T.a)().mark((function e(t){var n,c;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:1,jsonrpc:"2.0",method:"vechain_certificate",params:[{cert:JSON.stringify({purpose:"identification",payload:{type:"text",content:t},domain:window.location.origin})}]},e.next=4,o.sendCustomRequest(n);case 4:return c=e.sent,e.abrupt("return",c);case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var t;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a||c.activate(),j(!0),e.next=4,we();case 4:t=e.sent,console.log(t,"check code"),t&&I(t),j(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var t,n,c,r,s;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m(!0),e.next=4,_(E);case 4:return t=e.sent,console.log(t,"check sign res"),m(!1),n=JSON.parse(t),c=(n.signer||"").toLowerCase(),r={chainId:i,signature:n.signature,certificate:{purpose:"purpose",domain:n.domain,signer:n.signer,timestamp:n.timestamp,payload:{type:"type",content:E}}},w(!0),e.next=13,Ce(r);case 13:s=e.sent,F({address:c,getTokenRes:s}),w(!1),z({address:c,getTokenRes:s}),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(0),console.log(e.t0),m(!1),I("");case 24:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}(),z=function(e){var t=confirm("Accept terms and login ?");console.log(e,t,"check r"),t?(N(e.address),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.location.href,n=ke(t);if(e||n.userAddress){n.userAddress=e;var c=Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})),r="".concat(t.split("?")[0]);c.length>0&&(r+="?".concat(c.join("&"))),"".concat(window.location.href).includes("/Code403")?window.location.href="".concat(window.location.origin,"/dashboard?userAddress=").concat(e):window.location.href=r}}(e.address),function(e){if("undefined"!==typeof window){Te("_cert_",e.address,e.loginCert),De(e.address,e.getTokenRes),localStorage.setItem("userAddress",e.address);var t=Pe("TermsConditionsAgree",null);t[e.address]=(new Date).getTime(),localStorage.setItem("TermsConditionsAgree",JSON.stringify(t))}}(e)):(m(!1),w(!1),j(!1),I(""))};return Object(r.useEffect)((function(){E&&a&&(console.log("sign and logining"),W())}),[E,a]),Object(r.useEffect)((function(){if(a&&"undefined"!==typeof window){var e=window.location.search,t=-1!==e.indexOf("userAddress")?e.split("userAddress=")[1]:"",n=t||s.toLowerCase(),c=localStorage.getItem("jwtToken");if(console.log(t,s.toLowerCase(),c,"check location"),c){var r=JSON.parse(c);(null!==r&&void 0!==r&&r[n]||null!==r&&void 0!==r&&r[s.toLowerCase()])&&(null!==r&&void 0!==r&&r[n]?(N(n),F({address:n,getTokenRes:null===r||void 0===r?void 0:r[n]})):null!==r&&void 0!==r&&r[s.toLowerCase()]&&(N(s.toLowerCase()),F({address:n,getTokenRes:null===r||void 0===r?void 0:r[s.toLowerCase()]})))}}}),[a,s]),Object(b.jsx)(Me.Provider,{value:{account:s,currentAccount:A,authToken:null===R||void 0===R?void 0:R.getTokenRes,handleConnect:L,handleLogout:function(){m(!1),w(!1),j(!1),I(""),F(Object.create(null)),localStorage.removeItem("_cert_"),localStorage.removeItem("jwtToken"),localStorage.removeItem("userAddress"),c.deactivate()},isSigning:x,isRequestingCode:u,isLogining:y,acceptTermsData:R},children:t})},Fe=Object(r.memo)((function(){var e=Object(v.useWeb3React)(),t=e.connector,n=e.chainId,c=e.accounts,i=e.isActivating,s=e.error,a=e.account,o=e.isActive,l=function(){var e=Object(r.useContext)(Me);if(e)return e;throw new Error("useAccountProvider must be used in AccountProvider")}(),d=l.currentAccount,u=l.authToken,j=l.handleConnect,p=l.handleLogout,h=l.isSigning,f=l.isRequestingCode,x=l.isLogining;return Object(r.useEffect)((function(){t.connectEagerly()}),[]),Object(b.jsxs)(_e,{children:[Object(b.jsxs)(We,{children:[Object(b.jsxs)(b.Fragment,{children:[f&&Object(b.jsx)("span",{children:"\u6b63\u5728\u83b7\u53d6\u767b\u5f55 code"}),h&&Object(b.jsx)("span",{children:"\u8bf7\u5728\u94b1\u5305\u5185\u5b8c\u6210\u767b\u5f55\u7b7e\u540d"}),x&&Object(b.jsx)("span",{children:"\u767b\u5f55\u4e2d..."})]}),u?Object(b.jsxs)(qe,{children:[u,Object(b.jsxs)("div",{className:"button-group",children:[Object(b.jsx)("div",{onClick:j,className:"single-button add",children:"Add Account"}),Object(b.jsx)("div",{onClick:p,className:"single-button",children:"Logout"})]})]}):Object(b.jsx)(b.Fragment,{children:h||f||x?null:Object(b.jsx)(b.Fragment,{children:i?Object(b.jsx)("span",{children:"Activating"}):Object(b.jsx)(ze,{onClick:j,children:Object(b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"31.785",height:"31.053",children:Object(b.jsx)("path",{fill:"#fff",d:"M23.944 9.839l-2.3-3.984a1.1 1.1 0 00-1.494-.407L5.035 14.174a1.1 1.1 0 01-1.1-1.905L19.05 3.543a1.1 1.1 0 00-1.1-1.906L2.835 10.364a3.286 3.286 0 00-1.185 4.494l7.7 13.337a3.286 3.286 0 004.485 1.221L28.95 20.69a1.1 1.1 0 00.394-1.498l-2.3-3.984a3.289 3.289 0 00-3.1-5.37zm2.96 9.491l-14.17 8.181a1.1 1.1 0 01-1.494-.407L5.09 16.452a3.212 3.212 0 001.045-.372l14.17-8.182 1.65 2.858-2.834 1.637a3.3 3.3 0 003.3 5.715l2.835-1.636zM25.1 14.022l-3.779 2.181a1.1 1.1 0 01-1.1-1.905L24 12.116a1.1 1.1 0 011.1 1.906z"})})})})})]}),Object(b.jsx)("h1",{children:"Dapp Account Status"}),Object(b.jsxs)("div",{className:"inner",children:[Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Auth Token:"}),Object(b.jsx)("div",{className:"right",children:u})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Is Signing:"}),Object(b.jsx)("div",{className:"right",children:h?"true":"false"})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Account Using:"}),Object(b.jsx)("div",{className:"right",children:d})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Priority Account:"}),Object(b.jsx)("div",{className:"right",children:a})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Accounts Provided:"}),Object(b.jsx)("div",{className:"right",children:null!==c&&void 0!==c&&c.length?c.map((function(e){return Object(b.jsxs)("span",{className:e.toLowerCase()===d.toLowerCase()?"red":"",children:[e,Object(b.jsx)("br",{})]},e)})):""})]})]}),Object(b.jsx)("h1",{children:"Nufinetes Status"}),Object(b.jsxs)("div",{className:"inner",children:[Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Current Chain Id:"}),Object(b.jsx)("div",{className:"right",children:n})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Wallet Connected Correct:"}),Object(b.jsx)("div",{className:"right",children:o?"true":"false"})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"is Activating:"}),Object(b.jsx)("div",{className:"right",children:i?"true":"false"})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Priority Account:"}),Object(b.jsx)("div",{className:"right",children:a})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Accounts Provided:"}),Object(b.jsx)("div",{className:"right",children:null===c||void 0===c?void 0:c.join(", ")})]}),Object(b.jsxs)(Le,{children:[Object(b.jsx)("div",{className:"left",children:"Error:"}),Object(b.jsx)("div",{className:"right",children:JSON.stringify({error:s})})]})]})]})})),_e=u.a.div(Ae||(Ae=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),Le=u.a.div(Ne||(Ne=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 700px;\n  font-size: 20px;\n  margin-bottom: 14px;\n\n  .right {\n    font-weight: bold;\n    word-break: break-all;\n    max-width: 450px;\n\n    .red {\n      color: red;\n    }\n  }\n"]))),We=u.a.div(Be||(Be=Object(d.a)(["\n  height: 200px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: solid 1px;\n  width: 500px;\n  margin-top: 20px;\n"]))),ze=u.a.div(Se||(Se=Object(d.a)(["\n  width: 72px;\n  height: 72px;\n  border-radius: 36px;\n  background: #f44336;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n"]))),qe=u.a.div(Ee||(Ee=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n\n  .button-group {\n    .single-button {\n      min-width: 120px;\n      height: 40px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      cursor: pointer;\n      border: solid 1px #000;\n      border-radius: 10px;\n      margin-top: 12px;\n      cursor: pointer;\n      &:hover {\n        &.add {\n          background: #1665e3;\n        }\n        background: #ff4436;\n      }\n    }\n  }\n"]))),Ve=[[le,de]];function Je(){return Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)(j,{}),Object(b.jsxs)("div",{style:{fontSize:18,width:800,textAlign:"center"},children:["Dapp Example",Object(b.jsx)("br",{}),"This example provides a simulation of Dapp-related business, such as the need to obtain a login token after the wallet is connected, and the feature of multi-wallet login"]}),Object(b.jsx)(v.Web3ReactProvider,{connectors:Ve,lookupENS:!1,children:Object(b.jsx)(Re,{children:Object(b.jsx)(Fe,{})})})]})}var Ue,Ge,He,Ke,Qe,Xe,Ye,Ze,$e,et=n(107),tt=function(e){var t=e.provider,n=e.account,c=e.type,i=Object(r.useState)(""),s=Object(h.a)(i,2),a=s[0],o=s[1],l=Object(r.useState)(""),d=Object(h.a)(l,2),u=d[0],j=d[1],p=Object(r.useState)("Example `personal_sign` message"),v=Object(h.a)(p,2),f=v[0],x=v[1],m=Object(r.useState)(""),O=Object(h.a)(m,2),g=O[0],y=O[1],w=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var t;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(et.recoverPersonalSignature)({data:f,signature:a});case 4:t=e.sent,j(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(nt,{className:c,children:[Object(b.jsx)("h4",{children:"Personal Sign"}),Object(b.jsx)(ct,{value:f,onChange:function(e){x(e.target.value)}}),Object(b.jsx)(rt,{onClick:function(){var e=[f,n];null!==t&&void 0!==t&&t.request?t.request({method:"personal_sign",params:e}).then((function(e){return o(e)})):y("Provider does not support Eth signs")},children:"Personal Sign"}),Object(b.jsx)(it,{children:"Sign Result"}),Object(b.jsx)(st,{children:a||""}),Object(b.jsx)(rt,{onClick:w,children:"Recover signature"}),Object(b.jsx)(it,{children:"Recover Result"}),Object(b.jsx)(st,{className:"recover",children:u||""}),g&&Object(b.jsx)("div",{style:{color:"red"},children:g})]})},nt=u.a.div(Ue||(Ue=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: 20px;\n  width: 280px;\n  margin-top: 20px;\n  padding-top: 0;\n\n  &.nufinetes {\n    background: #caf7ff;\n  }\n  &.metamask {\n    background: #ffebb4;\n  }\n\n  h4 {\n    margin: 12px auto;\n  }\n"]))),ct=u.a.textarea(Ge||(Ge=Object(d.a)(["\n  width: 100%;\n"]))),rt=u.a.button(He||(He=Object(d.a)(["\n  width: 100%;\n  margin-bottom: 12px;\n  margin-top: 12px;\n"]))),it=u.a.div(Ke||(Ke=Object(d.a)(["\n  width: 100%;\n  text-align: left;\n  font-size: 12px;\n"]))),st=u.a.div(Qe||(Qe=Object(d.a)(["\n  width: 100%;\n  min-height: 120px;\n  background-color: #dbdbdb;\n  padding: 10px;\n  font-size: 14px;\n  word-wrap: break-word;\n  box-sizing: border-box;\n  border-radius: 8px;\n\n  &.recover {\n    min-height: 80px;\n  }\n"]))),at=function(e){var t=e.provider,n=e.account,c=e.type,i=Object(r.useState)(""),s=Object(h.a)(i,2),a=s[0],o=s[1],l=Object(r.useState)(""),d=Object(h.a)(l,2),u=d[0],j=d[1],p=Object(r.useState)(""),v=Object(h.a)(p,2),f=v[0],x=v[1],m={domain:{name:"Ether Mail",verifyingContract:"0xCcCCccccCCCCcCCCCCCcCcCccCcCCCcCcccccccC",version:"1"},message:{contents:"Hello, Bob!",from:{name:"Cow",wallets:["0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826","0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF"]},to:[{name:"Bob",wallets:["0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB","0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57","0xB0B0b0b0b0b0B000000000000000000000000000"]}]},primaryType:"Mail",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"verifyingContract",type:"address"}],Group:[{name:"name",type:"string"},{name:"members",type:"Person[]"}],Mail:[{name:"from",type:"Person"},{name:"to",type:"Person[]"},{name:"contents",type:"string"}],Person:[{name:"name",type:"string"},{name:"wallets",type:"address[]"}]}},O=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var t;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(et.recoverTypedSignature)({data:m,signature:a,version:et.SignTypedDataVersion.V4});case 4:t=e.sent,j(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(ot,{className:c,children:[Object(b.jsx)("h4",{children:"Sign Typed Data V4"}),Object(b.jsx)(ut,{children:"\n          message: {\n            contents: 'Hello, Bob!',\n            from: {\n              name: 'Cow',\n              wallets: ['0xCD2a3d9F938E13CD947Ec05AbC7FE734Df8DD826', '0xDeaDbeefdEAdbeefdEadbEEFdeadbeEFdEaDbeeF'],\n            },\n            to: [\n              {\n                name: 'Bob',\n                wallets: [\n                  '0xbBbBBBBbbBBBbbbBbbBbbbbBBbBbbbbBbBbbBBbB',\n                  '0xB0BdaBea57B0BDABeA57b0bdABEA57b0BDabEa57',\n                  '0xB0B0b0b0b0b0B000000000000000000000000000',\n                ],\n              },\n            ],\n          },\n      "}),Object(b.jsx)(lt,{onClick:function(){var e=[n,JSON.stringify(m)];null!==t&&void 0!==t&&t.request?t.request({method:"eth_signTypedData_v4",params:e}).then((function(e){return o(e)})):x("Provider does not support Eth signs")},children:"Sign Typed Data V4"}),Object(b.jsx)(dt,{children:"Sign Result"}),Object(b.jsx)(ut,{children:a||""}),Object(b.jsx)(lt,{onClick:O,children:"Recover signature"}),Object(b.jsx)(dt,{children:"Recover Result"}),Object(b.jsx)(ut,{className:"recover",children:u||""}),f&&Object(b.jsx)("div",{style:{color:"red"},children:f})]})},ot=u.a.div(Xe||(Xe=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  padding: 20px;\n  width: 280px;\n  margin-top: 20px;\n  padding-top: 0;\n\n  &.nufinetes {\n    background: #caf7ff;\n  }\n  &.metamask {\n    background: #ffebb4;\n  }\n\n  h4 {\n    margin: 12px auto;\n  }\n"]))),lt=u.a.button(Ye||(Ye=Object(d.a)(["\n  width: 100%;\n  margin-bottom: 12px;\n  margin-top: 12px;\n"]))),dt=u.a.div(Ze||(Ze=Object(d.a)(["\n  width: 100%;\n  text-align: left;\n  font-size: 12px;\n"]))),ut=u.a.div($e||($e=Object(d.a)(["\n  width: 100%;\n  min-height: 120px;\n  background-color: #dbdbdb;\n  padding: 10px;\n  font-size: 14px;\n  word-wrap: break-word;\n  box-sizing: border-box;\n  border-radius: 8px;\n\n  &.recover {\n    min-height: 80px;\n  }\n"]))),bt=g.useChainId,jt=g.useAccounts,pt=g.useError,ht=g.useIsActivating,vt=g.useIsActive,ft=g.useProvider;g.useENSNames;function xt(){var e=bt(),t=jt(),n=pt(),c=ht(),i=vt(),s=ft();return Object(r.useEffect)((function(){O.connectEagerly()}),[]),Object(b.jsxs)(C,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"MetaMask"}),Object(b.jsx)(L,{isActivating:c,error:n,isActive:i}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(D,{chainId:e}),Object(b.jsx)(w,{accounts:t})]}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(_,{connector:O,chainId:e,isActivating:c,error:n,selectable:!1,isActive:i}),Object(b.jsx)(tt,{account:null===t||void 0===t?void 0:t[0],provider:null===s||void 0===s?void 0:s.provider,type:"metamask"}),Object(b.jsx)(at,{account:null===t||void 0===t?void 0:t[0],provider:null===s||void 0===s?void 0:s.provider,type:"metamask"})]})}var mt=de.useChainId,Ot=de.useAccounts,gt=de.useError,yt=de.useIsActivating,wt=de.useIsActive,Ct=de.useProvider;function kt(){var e=mt(),t=Ot(),n=gt(),c=yt(),i=wt(),s=Ct();return Object(r.useEffect)((function(){le.connectEagerly()}),[]),Object(b.jsxs)(C,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Nufinetes"}),Object(b.jsx)(L,{isActivating:c,error:n,isActive:i}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(D,{chainId:e}),Object(b.jsx)(w,{accounts:t})]}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(_,{connector:le,chainId:e,isActivating:c,error:n,selectable:!1,isActive:i}),Object(b.jsx)(tt,{account:null===t||void 0===t?void 0:t[0],provider:null===s||void 0===s?void 0:s.provider,type:"nufinetes"}),Object(b.jsx)(at,{account:null===t||void 0===t?void 0:t[0],provider:null===s||void 0===s?void 0:s.provider,type:"nufinetes"})]})}function At(){return Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)(j,{}),Object(b.jsxs)("div",{style:{fontSize:18,width:800,textAlign:"center"},children:["Eth Sign Examples",Object(b.jsx)("br",{}),"This example provides two panels to demonstrate the signature function of Nufinetes and MetaMask respectively. When the wallet address is the same and the signature content is the same, the signature results should be consistent"]}),Object(b.jsxs)("div",{style:{display:"flex",flexFlow:"wrap",fontFamily:"sans-serif"},children:[Object(b.jsx)(kt,{}),Object(b.jsx)(xt,{})]})]})}var Nt=n(167),Bt=n(169),St=n(166),Et=de.useChainId,It=de.useAccounts,Dt=de.useError,Tt=de.useIsActivating,Pt=de.useIsActive,Mt=de.useProvider,Rt="0xa36085F69e2889c224210F603D836748e7dC0088",Ft="0xdd612965659fe530869f9e224286d232334b4bd3",_t="https://faucets.chain.link/";function Lt(){var e=Et(),t=It(),n=Dt(),c=Tt(),i=Pt(),s=t&&i,a=Mt(),o=Object(r.useState)(0),l=Object(h.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(0),p=Object(h.a)(j,2),v=p[0],f=p[1],x=Object(r.useState)(0),m=Object(h.a)(x,2),O=m[0],g=m[1],y=Object(r.useState)(""),k=Object(h.a)(y,2),A=k[0],N=k[1];Object(r.useEffect)((function(){le.connectEagerly()}),[]);var B=function(){var e=Object(P.a)(Object(T.a)().mark((function e(t,n){var c;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t&&n){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,n.getBalance(t);case 5:if(!+(c=e.sent)&&0!==+c){e.next=8;break}return e.abrupt("return",+Object(Nt.formatUnits)(c,18));case 8:return e.abrupt("return",null);case 11:return e.prev=11,e.t0=e.catch(0),console.log(e.t0,"check balance error"),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var n,c,r,i,s;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t[0],a);case 2:return n=e.sent,u(n),c=new Bt.a(Rt,St,a.getSigner()),e.next=7,c.balanceOf(t[0]);case 7:return r=e.sent,e.next=10,c.decimals();case 10:return i=e.sent,f(+Object(Nt.formatUnits)(r,i)),e.next=14,c.allowance(t[0],Ft,{gasLimit:1e6});case 14:s=e.sent,g(Number(s));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var t,n;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Bt.a(Rt,St,a.getSigner()),e.next=3,t.approve(Ft,"0xffffff",{});case 3:return n=e.sent,N(n.hash),e.next=7,n.wait();case 7:e.sent;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(C,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Nufinetes"}),Object(b.jsx)(L,{isActivating:c,error:n,isActive:s}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(D,{chainId:e}),Object(b.jsx)(w,{accounts:t})]}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),!s&&Object(b.jsx)("button",{onClick:function(){return le.activate(42)},children:"Connect"}),s&&Object(b.jsx)("button",{onClick:function(){return le.deactivate()},children:"Disconnect"}),42===e?Object(b.jsxs)(b.Fragment,{children:[" ",Object(b.jsx)("button",{onClick:S,children:"Get Balance And Approve"}),Object(b.jsxs)("div",{children:["Eth Balance: ",d]}),Object(b.jsxs)("div",{children:["Link Balance: ",v]}),Object(b.jsxs)("div",{children:["Link Approve: ",O]}),Object(b.jsx)("button",{onClick:E,children:"Get Approve"}),Object(b.jsxs)("div",{style:{wordBreak:"break-all"},children:["Tx Hash: ",A]}),Object(b.jsx)("div",{style:{marginTop:10},children:"Link Contract Address: "}),Object(b.jsx)("div",{children:Rt}),Object(b.jsx)("div",{style:{color:"green"},children:"Link Faucet Address: "}),Object(b.jsx)("a",{href:_t,rel:"noreferrer",target:"_blank",children:_t})]}):Object(b.jsx)("span",{style:{display:"flex",justifyContent:"center",marginTop:10,textAlign:"center"},children:"Please Switch to Eth Kovan Testnet on Nufinetes"})]})}function Wt(){return Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)(j,{}),Object(b.jsxs)("div",{style:{fontSize:18,width:800,textAlign:"center"},children:["Eth Contract Call",Object(b.jsx)("br",{}),"This example provides balance query and contract call on the Kovan testnet"]}),Object(b.jsx)("div",{style:{display:"flex",flexFlow:"wrap",fontFamily:"sans-serif"},children:Object(b.jsx)(Lt,{})})]})}var zt=n(260),qt=n(442),Vt=n(261),Jt=n.n(Vt),Ut=de.useChainId,Gt=de.useAccounts,Ht=de.useError,Kt=de.useIsActivating,Qt=de.useIsActive,Xt=de.useProvider,Yt="0xa39a4b2e23220305083e2e7c94c8950ef1e641c6",Zt=new Jt.a({node:"https://testnet.veblocks.net/",network:"test"});function $t(){var e=Ut(),t=Gt(),n=Ht(),c=Kt(),i=Qt(),s=t&&i,a=Xt(),o=Object(r.useState)(0),l=Object(h.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(""),p=Object(h.a)(j,2),v=p[0],f=p[1],x=Object(r.useState)(""),m=Object(h.a)(x,2),O=m[0],g=m[1],y=Object(r.useState)(""),k=Object(h.a)(y,2),A=k[0],N=k[1];Object(r.useEffect)((function(){le.connectEagerly()}),[]);var B=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var n,c,r,i,s,a;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},c=Zt.thor.account(Yt),r=c.method(n),e.next=5,r.call(t[0]);case 5:i=e.sent,s=new qt.a.Function(n),a=s.decode(i.data),u(a.balance/1e18);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(P.a)(Object(T.a)().mark((function e(t){var n,c,r,i;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.address,c=t.clauseList,console.log({clauseList:c,str:JSON.stringify(c)}),e.prev=2,r={id:1,jsonrpc:"2.0",method:"vechain_transaction",params:[c,{broadcast:!0,chainId:a.chainId,signer:n}]},e.next=6,a.sendCustomRequest(r);case 6:return i=e.sent,console.log({signRes:i}),e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(2),console.log({sendCustomRequest:e.t0.message}),e.abrupt("return",Promise.reject(e.t0.message||"Payment failed"));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(P.a)(Object(T.a)().mark((function e(){var n,c,r,i,s,a,o;return Object(T.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v&&!Number.isNaN(+v)){e.next=5;break}return alert("Please input number"),e.abrupt("return");case 5:if(O){e.next=8;break}return alert("Please input receiver address"),e.abrupt("return");case 8:return c={constant:!1,inputs:[{name:"_to",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},r=BigInt(parseFloat(v)*Math.pow(10,18)),i=[O,r.toString()],s=(n=Zt.thor.account(Yt).method(c)).asClause.apply(n,i),a=[Object(zt.a)({comment:"Transfer ".concat(v," VEED")},s)],e.next=15,S({address:t[0].toLocaleLowerCase(),comment:"Transfer ".concat(v," VEED"),clauseList:a});case 15:(o=e.sent)&&o.txid&&N(o.txid);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(C,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("b",{children:"Nufinetes"}),Object(b.jsx)(L,{isActivating:c,error:n,isActive:s}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),Object(b.jsx)(D,{chainId:e}),Object(b.jsx)(w,{accounts:t})]}),Object(b.jsx)("div",{style:{marginBottom:"1rem"}}),!s&&Object(b.jsx)("button",{onClick:function(){return le.activate(42)},children:"Connect"}),s&&Object(b.jsx)("button",{onClick:function(){return le.deactivate()},children:"Disconnect"}),818000001===e?Object(b.jsxs)(b.Fragment,{children:[" ",Object(b.jsx)("button",{onClick:B,children:"Get Balance of Veed"}),Object(b.jsxs)("div",{children:["Veed Balance: ",d]}),Object(b.jsx)("div",{style:{wordBreak:"break-all"},children:"Tx Hash: "}),Object(b.jsx)("div",{style:{marginTop:10},children:"Veed Contract Address: "}),Object(b.jsx)("div",{children:Yt}),Object(b.jsxs)("div",{style:{marginTop:10},children:[Object(b.jsx)("span",{children:"Input Veed Amount"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{style:{width:"100%",height:30},type:"text",value:v,onChange:function(e){return f(e.target.value)}})]}),Object(b.jsxs)("div",{style:{margin:"10px 0"},children:[Object(b.jsx)("span",{children:"Input Receiver Address"}),Object(b.jsx)("br",{}),Object(b.jsx)("input",{style:{width:"100%",height:30},type:"text",value:O,onChange:function(e){return g(e.target.value)}})]}),Object(b.jsx)("button",{onClick:E,children:"Transfer Veed"}),Object(b.jsxs)("div",{style:{wordBreak:"break-all"},children:["Tx Hash: ",A]})]}):Object(b.jsx)("span",{style:{display:"flex",justifyContent:"center",marginTop:10,textAlign:"center"},children:"Please Switch to Vechain Testnet on Nufinetes"})]})}function en(){return Object(b.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(b.jsx)(j,{}),Object(b.jsxs)("div",{style:{fontSize:18,width:800,textAlign:"center"},children:["Vechain Contract Call",Object(b.jsx)("br",{}),"This example provides balance inquiries and contract calls on the VeChain testnet"]}),Object(b.jsx)("div",{style:{display:"flex",flexFlow:"wrap",fontFamily:"sans-serif"},children:Object(b.jsx)($t,{})})]})}var tn=function(){return Object(b.jsx)(r.Suspense,{fallback:Object(b.jsx)(b.Fragment,{children:"loading"}),children:Object(b.jsx)(o.a,{basename:"/nufinetes-link-demo",children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.a,{path:"/",element:Object(b.jsx)(ye,{})}),Object(b.jsx)(l.a,{path:"/dapp",element:Object(b.jsx)(Je,{})}),Object(b.jsx)(l.a,{path:"/eth-sign",element:Object(b.jsx)(At,{})}),Object(b.jsx)(l.a,{path:"/contract",element:Object(b.jsx)(Wt,{})}),Object(b.jsx)(l.a,{path:"/vechain",element:Object(b.jsx)(en,{})})]})})})};n(433);var nn=function(){return Object(b.jsx)(tn,{})},cn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,443)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),i(e),s(e)}))};a.a.createRoot(document.getElementById("root")).render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(nn,{})})),cn()}},[[434,1,2]]]);
//# sourceMappingURL=main.1000ba83.chunk.js.map